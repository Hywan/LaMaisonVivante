<!DOCTYPE html>

<html lang="fr">
<head>
  <title>Hub — La Maison Vivante</title>
  <meta http-equiv="content-type" content="text/html; charset=utf-8" />
  <meta http-equiv="content-type" content="text/javascript; charset=utf-8" />
  <meta http-equiv="content-type" content="text/css; charset=utf-8" />
  <meta name="viewport" content="width=device-width, user-scalable=no" />
  <meta name="theme-color" content="#b24646" />
  <link rel="icon" type="image/png" href="static/images/robot.png" />
  <link rel="apple-touch-icon" sizes="180x180" href="static/images/robot.png" />
  <link rel="stylesheet" type="text/css" href="static/style/main.css" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />

  <!-- A navigation element -->
  <template id="template--nav">
    <style>
      @import "static/style/main.css";
    </style>

    <h1 class="header--title">
      <ol>
        <li><slot name="root">(root)</slot></li>
      </ol>
    </h1>
  </template>

  <template id="template--things">
    <style>
      @import "static/style/main.css";
    </style>

    <div class="things">
      <h2 class="things--location"><span class="heading"><slot name="location">(somewhere)</slot></span></h2>

      <div class="things--list">
        <slot>(none)</slot>
      </div>
    </div>
  </template>

  <template id="template--unlocated-things">
    <style>
      @import "static/style/main.css";
    </style>

    <div class="things">
      <div class="things--list">
        <slot>(none)</slot>
      </div>
    </div>
  </template>

  <template id="template--thing">
    <style>
      @import "static/style/main.css";
    </style>

    <div id="thing-?" class="thing">
      <slot name="thing">(component)</slot>
    </div>
  </template>

  <template id="template--expandable-thing">
    <style>
      @import "static/style/main.css";
    </style>

    <div class="thing--expandable" aria-expanded="false">
      <div class="thing--frame thing--summary thing--expander">
        <h3 class="thing--frame-name"><slot name="name">(unnamed)</slot></h3>

        <div class="thing--frame-content">
          <span class="thing--state-icon"><slot name="state-icon">(❓)</slot></span>
          <span class="thing--state-text"><slot name="state-text">(??)</slot></span>
        </div>
      </div>
      <div class="thing--long">
        <h3 class="thing--name"><slot name="long-name">(unnamed)</slot></h3>
        <slot name="thing" class="thing--thing">(component)</slot>
      </div>
    </div>
  </template>

  <template id="template--meter-thing">
    <style>
      @import "static/style/main.css";
    </style>

    <div class="thing--frame thing--meter">
      <h3 class="thing--frame-name"><slot name="name">(unnamed)</slot></h3>

      <div class="thing--frame-content">
        <div class="thing--meter-primary-value">?</div>
        <div class="thing--meter-secondary-value"></div>

        <svg class="thing--meter-meter" viewBox="0 0 38 38">
          <g class="blender">
            <foreignObject x="0" y="0" width="38" height="38">
              <slot name="meter-gradient"><div class="gradient gradient--conic_default"></div></slot>
            </foreignObject>

            <g class="blender--subject">
              <rect x="0" y="0" width="38" height="38" fill="#fff" />
              <circle class="meter stroked" r="16" cx="19" cy="19" />
            </g>
          </g>
        </svg>
      </div>
    </div>
  </template>

  <template id="template--solar-pv-thing">
    <style>
      @import "static/style/main.css";
    </style>

    <div class="thing--frame thing--solar-pv">
      <h3 class="thing--frame-name"><slot name="name">(unnamed)</slot></h3>

      <div class="thing--frame-content">
        <div class="thing--solar-pv-primary-value">?</div>
        <div class="thing--solar-pv-sunrise">?</div>
        <div class="thing--solar-pv-sunset">?</div>

        <svg class="thing--solar-pv-meter" viewBox="0 0 38 38">
          <g class="blender">
            <foreignObject x="0" y="0" width="38" height="38">
              <div class="gradient gradient--conic__sky"></div>
            </foreignObject>

            <g class="blender--subject">
              <rect x="0" y="0" width="38" height="38" fill="#fff" />
              <circle class="meter stroked" r="16" cx="19" cy="19" />
              <circle class="stroked" r="16" cx="19" cy="19" stroke-dasharray="30 100" stroke-dashoffset="-10"  />
              <circle class="thing--solar-pv-sun" r="3" cx="3" cy="19" aria-hidden="true" />
            </g>
          </g>
        </svg>
      </div>
    </div>
  </template>

  <template id="template--dhw-thing">
    <style>
      @import "static/style/main.css";
    </style>

    <div class="thing--frame thing--dhw">
      <h3 class="thing--frame-name"><slot name="name">(unnamed)</slot></h3>

      <div class="thing--frame-content">
        <div class="thing--dhw-top-value">?</div>
        <div class="thing--dhw-bottom-value">?</div>

        <svg class="thing--dhw-boiler" viewBox="0 0 314 493">
          <g class="blender">
            <foreignObject x="0" y="0" width="314" height="493">
              <div class="gradient gradient--conic__blue_to_red"></div>
            </foreignObject>

            <g class="blender--subject">
              <rect x="0" y="0" width="314" height="493" fill="#fff" />
              <path d="M155 0c-3 1-6 3-8 6C79 131 0 239 0 342c0 86 71 151 157 151s157-65 157-151c0-103-80-211-147-336-3-4-7-6-12-6zm2 34c65 119 134 221 134 308 0 74-59 128-134 128S22 416 22 342c0-87 69-189 135-308zM66 325c-6 0-10 5-10 11 0 64 51 112 112 112a11 11 0 1 0 0-22c-50 0-90-38-90-90a11 11 0 0 0-12-11z" />
            </g>
          </g>
        </svg>
      </div>
    </div>
  </template>

  <template id="template--ventilation-thing">
    <style>
      @import "static/style/main.css";
    </style>

    <div class="thing--frame thing--ventilation">
      <h3 class="thing--frame-name"><slot name="name">(unnamed)</slot></h3>

      <div class="thing--frame-content">
        <div class="thing--ventilation-after-ground-coupled-heat-exchanger">?</div>
        <div class="thing--ventilation-after-heat-recovery-exchanger">?</div>
        <div class="thing--ventilation-extracted">?</div>

        <svg class="thing--ventilation-meters" viewBox="0 0 38 38">
          <g class="blender">
            <foreignObject x="0" y="0" width="38" height="38">
              <div class="gradient gradient--conic__ventilation"></div>
            </foreignObject>

            <g class="blender--subject">
              <rect x="0" y="0" width="38" height="38" fill="#fff" />
              <circle class="meter stroked meter--ventilation-after-ground-coupled-heat-exchanger" r="9" cx="19" cy="19" />
              <circle class="meter stroked meter--ventilation-after-heat-recovery-exchanger" r="12.5" cx="19" cy="19" />
              <circle class="meter stroked meter--ventilation-extracted" r="16" cx="19" cy="19" />
            </g>
          </g>
        </svg>
      </div>
    </div>
  </template>

  <template id="template--actionable-thing">
    <style>
      @import "static/style/main.css";
    </style>

    <div class="thing--frame thing--actionable">
      <h3 class="thing--frame-name">
        <slot name="location">(unnamed)</slot>

        <div class="thing--frame-subname">
          <slot name="name">(unnamed)</slot>
        </div>
      </h3>

      <div class="thing--frame-content">
        <slot name="action"></slot>
      </div>
    </div>
  </template>

  <template id="template--thing-pulse">
    <style>
      @import "static/style/main.css";
    </style>

    <div class="thing--actions">
      <button class="thing--pulse" title="Pulse"><svg class="icon"><use href="#icon-power" /></svg></button>
    </div>

    <svg class="svg--symbols">
      <symbol id="icon-power" viewBox="0 0 500 560">
        <path fill="currentColor" d="M250 560A253 253 0 0 1 0 305a255 255 0 0 1 99-204 35 35 0 0 1 49 7 36 36 0 0 1-6 51 183 183 0 0 0-71 146c0 101 80 183 179 183s180-82 180-183a183 183 0 0 0-71-146 36 36 0 0 1-7-51 35 35 0 0 1 49-7 255 255 0 0 1 99 204c0 141-112 255-250 255z" />
        <path fill="currentColor" d="M250 330a37 37 0 0 1-35-39V38a37 37 0 0 1 35-38 37 37 0 0 1 35 38v253a37 37 0 0 1-35 39z" />
      </symbol>
    </svg>
  </template>

  <template id="template--thing-blind">
    <style>
      @import "static/style/main.css";
    </style>

    <div class="thing--actions">
      <button class="thing--blind thing--blind-open" title="Open"><svg class="icon"><use href="#icon-up" /></svg></button>
      <button class="thing--blind thing--blind-stop" title="Stop"><svg class="icon"><use href="#icon-stop" /></svg></button>
      <button class="thing--blind thing--blind-close" title="Close"><svg class="icon"><use href="#icon-down" /></svg></button>
    </div>

    <svg class="svg--symbols">
      <symbol id="icon-up" viewBox="0 0 35 32">
        <path fill="none" stroke="currentColor" stroke-linejoin="round" stroke-width="6" d="m18 4 6 12 7 12H4l7-12z" />
      </symbol>

      <symbol id="icon-down" viewBox="0 0 35 32">
        <path fill="none" stroke="currentColor" stroke-linejoin="round" stroke-width="6" d="m18 28 6-12 7-12H4l7 12z" />
      </symbol>

      <symbol id="icon-stop" viewBox="0 0 35 32">
        <path fill="none" stroke="currentColor" stroke-linecap="round" stroke-width="7" d="M23 4v23h0M12 4v23h0" />
      </symbol>
    </svg>
  </template>

  <script src="static/javascript/sunrise.js" defer></script>
  <script src="static/javascript/main.js" defer></script>
</head>
<body>
  <header class="header--container">
    <div class="header">
      <my-nav id="nav" role="nav">
        <span slot="root">La Maison Vivante</span>
      </my-nav>
      <ul class="header--details" role="tablist" aria-label="View">
        <li id="tab-of-things-panel" role="tab" aria-selected="true" aria-controls="things-panel" tabindex="0" aria-label="Tous les objets">
          <svg class="icon"><use href="#icon-home" /></svg>
        </li>
        <li id="tab-of-metrics-panel" role="tab" aria-selected="false" aria-controls="metrics-panel" tabindex="1" aria-label="Toutes les métriques">
          <svg class="icon"><use href="#icon-graph" /></svg>
        </li>
      </ul>
    </div>
  </header>

  <main>
    <section id="things-panel" role="tabpanel" tabindex="0" aria-labelledby="tab-of-things-panel" aria-hidden="false">
      <my-unlocated-things>
        <my-thing>
          <my-meter-thing
            slot="thing"
            data-base="http://192.168.1.128:8092/0"
            data-property="state_of_charge"
            data-secondary-property="ongoing_power">
            <span slot="name">Batteries</span>
            <div slot="meter-gradient" class="gradient gradient--conic__yellow_to_green"></div>
          </my-meter-thing>
        </my-thing>

        <my-thing>
          <my-solar-pv-thing
            slot="thing"
            data-base="http://192.168.1.128:8092/4"
            data-property="power"
            data-secondary-property="current">
            <span slot="name">Solaire PV</span>
          </my-solar-pv-thing>
        </my-thing>

        <my-thing>
          <my-dhw-thing
            slot="thing"
            data-base="http://192.168.1.128:8093/0"
            data-top-value="top_of_the_tank"
            data-bottom-value="bottom_of_the_tank">
            <span slot="name">Boiler</span>
          </my-dhw-thing>
        </my-thing>

        <my-thing>
          <my-ventilation-thing
            slot="thing"
            data-base="http://192.168.1.128:8093/1"
            data-state-property="state"
            data-after-ground-coupled-heat-exchanger-value="supplied_air_after_ground_coupled_heat_exchanger"
            data-after-heat-recovery-exchanger-value="supplied_air_after_heat_recovery_exchanger"
            data-extracted-value="extracted_air">
            <span slot="name">Ventilation</span>
          </my-ventilation-thing>
        </my-thing>

        <my-thing>
          <my-meter-thing
            slot="thing"
            data-base="http://192.168.1.128:8093/1"
            data-property="inside_air_humidity">
            <span slot="name">Humidité</span>
            <div slot="meter-gradient" class="gradient gradient--conic__yellow_to_pink"></div>
          </my-meter-thing>
        </my-thing>
      </my-unlocated-things>

      <my-things>
        <span slot="location">Pièce de vie</span>

        <my-thing>
          <my-actionable-thing slot="thing">
            <span slot="name">lumières</span>
            <span slot="location">Général</span>
            <my-thing--pulse slot="action" data-base="http://192.168.1.128:8094/5"></my-thing--pulse>
          </my-actionable-thing>
        </my-thing>

        <my-thing>
          <my-actionable-thing slot="thing">
            <span slot="name">lumière</span>
            <span slot="location">Table</span>
            <my-thing--pulse slot="action" data-base="http://192.168.1.128:8094/7"></my-thing--pulse>
          </my-actionable-thing>
        </my-thing>

        <my-thing>
          <my-actionable-thing slot="thing">
            <span slot="name">lumière</span>
            <span slot="location">Îlot</span>
            <my-thing--pulse slot="action" data-base="http://192.168.1.128:8094/8"></my-thing--pulse>
          </my-actionable-thing>
        </my-thing>

        <my-thing>
          <my-actionable-thing slot="thing">
            <span slot="name">lumières</span>
            <span slot="location">Cuisine</span>
            <my-thing--pulse slot="action" data-base="http://192.168.1.128:8094/9"></my-thing--pulse>
          </my-actionable-thing>
        </my-thing>

        <my-thing>
          <my-actionable-thing slot="thing">
            <span slot="name">lumières</span>
            <span slot="location">Canapé</span>
            <my-thing--pulse slot="action" data-base="http://192.168.1.128:8094/6"></my-thing--pulse>
          </my-actionable-thing>
        </my-thing>

        <my-thing>
          <my-actionable-thing slot="thing">
            <span slot="name">lumières</span>
            <span slot="location">Entrée</span>
            <my-thing--pulse slot="action" data-base="http://192.168.1.128:8094/4"></my-thing--pulse>
          </my-actionable-thing>
        </my-thing>

        <my-thing>
          <my-actionable-thing slot="thing">
            <span slot="name">store</span>
            <span slot="location">Terrasse</span>
            <my-thing--blind slot="action" data-base="http://192.168.1.128:8095/1"></my-thing--blind>
          </my-actionable-thing>
        </my-thing>

        <my-thing>
          <my-actionable-thing slot="thing">
            <span slot="name">store</span>
            <span slot="location">Cuisine</span>
            <my-thing--blind slot="action" data-base="http://192.168.1.128:8095/0"></my-thing--blind>
          </my-actionable-thing>
        </my-thing>
      </my-things>

      <my-things>
        <span slot="location">Salle de bain enfants</span>

        <my-thing>
          <my-actionable-thing slot="thing">
            <span slot="name">lumière</span>
            <span slot="location">S. de Bain</span>
            <my-thing--pulse slot="action" data-base="http://192.168.1.128:8094/1"></my-thing--pulse>
          </my-actionable-thing>
        </my-thing>

        <my-thing>
          <my-actionable-thing slot="thing">
            <span slot="name">lumière</span>
            <span slot="location">Buanderie</span>
            <my-thing--pulse slot="action" data-base="http://192.168.1.128:8094/0"></my-thing--pulse>
          </my-actionable-thing>
        </my-thing>

        <my-thing>
          <my-actionable-thing slot="thing">
            <span slot="name">store</span>
            <span slot="location">S. de Bain</span>
            <my-thing--blind slot="action" data-base="http://192.168.1.128:8095/5"></my-thing--blind>
          </my-actionable-thing>
        </my-thing>
      </my-things>

      <my-things>
        <span slot="location">Chambres enfants</span>

        <my-thing>
          <my-actionable-thing slot="thing">
            <span slot="name">lumière</span>
            <span slot="location">Louise</span>
            <my-thing--pulse slot="action" data-base="http://192.168.1.128:8094/2"></my-thing--pulse>
          </my-actionable-thing>
        </my-thing>

        <my-thing>
          <my-actionable-thing slot="thing">
            <span slot="name">lumière</span>
            <span slot="location">Éli</span>
            <my-thing--pulse slot="action" data-base="http://192.168.1.128:8094/3"></my-thing--pulse>
          </my-actionable-thing>
        </my-thing>

        <my-thing>
          <my-actionable-thing slot="thing">
            <span slot="name">store</span>
            <span slot="location">Louise</span>
            <my-thing--blind slot="action" data-base="http://192.168.1.128:8095/4"></my-thing--blind>
          </my-actionable-thing>
        </my-thing>

        <my-thing>
          <my-actionable-thing slot="thing">
            <span slot="name">store</span>
            <span slot="location">Éli</span>
            <my-thing--blind slot="action" data-base="http://192.168.1.128:8095/3"></my-thing--blind>
          </my-actionable-thing>
        </my-thing>
      </my-things>

      <my-things>
        <span slot="location">Suite parentale</span>

        <my-thing>
          <my-actionable-thing slot="thing">
            <span slot="name">lumière</span>
            <span slot="location">Chambre</span>
            <my-thing--pulse slot="action" data-base="http://192.168.1.128:8094/12"></my-thing--pulse>
          </my-actionable-thing>
        </my-thing>

        <my-thing>
          <my-actionable-thing slot="thing">
            <span slot="name">lumière</span>
            <span slot="location">Lit</span>
            <my-thing--pulse slot="action" data-base="http://192.168.1.128:8094/10"></my-thing--pulse>
          </my-actionable-thing>
        </my-thing>

        <my-thing>
          <my-actionable-thing slot="thing">
            <span slot="name">lumière</span>
            <span slot="location">S. de Bain</span>
            <my-thing--pulse slot="action" data-base="http://192.168.1.128:8094/11"></my-thing--pulse>
          </my-actionable-thing>
        </my-thing>

        <my-thing>
          <my-actionable-thing slot="thing">
            <span slot="name">store</span>
            <span slot="location">Chambre</span>
            <my-thing--blind slot="action" data-base="http://192.168.1.128:8095/2"></my-thing--blind>
          </my-actionable-thing>
        </my-thing>
      </my-things>

      <my-things>
        <span slot="location">Serre</span>

        <my-thing>
          <my-actionable-thing slot="thing">
            <span slot="name">lumières</span>
            <span slot="location">Serre</span>
            <my-thing--pulse slot="action" data-base="http://192.168.1.128:8094/13"></my-thing--pulse>
          </my-actionable-thing>
        </my-thing>
      </my-things>
    </section>

    <section id="metrics-panel" role="tabpanel" tabindex="1" aria-labelledby="tab-of-metrics-panel" aria-hidden="true">
      <div class="tabs">
        <ul class="tabs" role="tablist" aria-label="Select metrics">
          <li id="tab-of-metrics-live-panel" role="tab" aria-selected="true" aria-controls="metrics-live-panel" tabindex="0" aria-label="Métriques en temps réel">
            En direct
          </li>
          <li id="tab-of-metrics-daily-panel" role="tab" aria-selected="false" aria-controls="metrics-daily-panel" tabindex="1" aria-label="Métriques quotidiennes">
            Journalier
          </li>
        </ul>
      </div>

      <iframe id="metrics-live-panel" role="tabpanel" tabindex="1" aria-labelledby="tab-of-metrics-live-panel" aria-hidden="false" src="http://192.168.1.128:3000/d/Mxk-7RWgk/live?orgId=1&refresh=10s&theme=light&kiosk"></iframe>
      <iframe id="metrics-daily-panel" role="tabpanel" tabindex="2" aria-labelledby="tab-of-metrics-daily-panel" aria-hidden="true" src="http://192.168.1.128:3000/d/gosssXkgz/daily-view?orgId=1&from=now-7d&to=now&theme=light&kiosk"></iframe>
    </section>
  </main>

  <svg height="0" width="0">
    <symbol id="icon-graph" viewBox="0 0 482 470">
      <path fill="currentColor" d="M241 217a72 72 0 0 0-72 71v111a72 72 0 1 0 144 0V288a72 72 0 0 0-72-71zm38 182a38 38 0 1 1-77 0V288a38 38 0 0 1 77 0zM72 101a72 72 0 0 0-72 72v226a72 72 0 1 0 144 0V173a72 72 0 0 0-72-72Zm38 298a38 38 0 0 1-76 0V173a38 38 0 0 1 76 0zM410 0a72 72 0 0 0-72 72v327a72 72 0 1 0 144 0V72a72 72 0 0 0-72-72Zm38 399a38 38 0 1 1-77 0V72a38 38 0 0 1 77 0z" />
    </symbol>
    <symbol id="icon-home" viewBox="0 0 532 450">
      <path d="M350 198c-9-7-23-5-30 5-7 9-5 23 5 30a97 97 0 0 1-58 174 96 96 0 0 1-58-174c9-7 11-21 4-30-7-10-21-12-30-5a140 140 0 1 0 167 0z" />
      <path d="M288 324V189a22 22 0 0 0-44 0v135a22 22 0 0 0 44 0z" />
      <path d="m523 191-74-57V39c0-7-6-13-14-13h-23c-7 0-14 6-14 13v56L281 5c-9-7-21-7-30 0L10 191c-6 4-9 10-10 17a25 25 0 0 0 40 23L267 57l226 174c11 8 27 6 35-5 9-11 6-27-4-35z" />
    </symbol>
  </svg>
</body>
</html>
